# 会话记录：2026-01-20

## 目标

- 整理并汇总已完成的 density 收敛性实验（10 个任务，fold0），并撰写报告文档。

## 已完成实验

运行目录（均为 fold0）：

- 网格实验（8 个）：`outputs/results/clg_ode/runs/clg_density_w{2,5}_ld{002,005,01,02}/fold0/`
- 两阶段训练（2×2 个 run）：`outputs/results/clg_ode/runs/clg_density_twostage_{a,b}_p{1,2}/fold0/`

## 结果汇总

- 报告：`docs/reports/clg_ode_density_convergence_fold0_20260120.md`
- `val_sc_log_pearson_sparse` 作为 early stopping 监控后，训练长度较上一轮更长，但 `val_density` 仍未接近 0（密度约束未呈现明显“收敛到对齐边数”的行为）。
- top-k/sparse 指标在不同 `lambda_density/warmup` 网格之间差异较小，尚不足以得出稳定结论。

## 文档更新

- `docs/workflow.md`：补充 density 10 实验批量提交与报告链接。
- `PROGRESS.md`：记录本轮结果整理与报告产出。

## 下一步实验设计（根因定位）

为避免继续“盲扫 `lambda_density`”，新增一套 10 任务实验包用于定位：

- `sum(p_hat)/k` 是否长期 `>>1`（过稠密）
- top-k 位置是否正确（`precision@k/recall@k/AUPRC`）
- 是否为 `L_edge` 的 `pos_weight` 推高导致 density 对抗不动
- focal 是否比调 `pos_weight` 更稳

批量提交脚本（用户执行）：

```bash
bash scripts/submit_clg_ode_mask_rootcause_10exp_batch.sh
```

新增的诊断字段会写入每个 run 的 `metrics.csv`，便于直接画曲线（`val_mask_ratio`、`val_mask_precision_at_k`、`val_mask_auprc` 等）。
